<!-- components/tutorial-overlay.html (Corrected and Self-Contained) -->
<style>
  #tutorial-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.85); z-index: 1000;
    display: flex; justify-content: center; align-items: center;
    backdrop-filter: blur(5px);
  }
  .tutorial-content {
    background: #1e1e1e; color: #fff; border: 1px solid #00ffc8;
    border-radius: 8px; box-shadow: 0 5px 25px rgba(0, 255, 200, 0.2);
    width: 90%; max-width: 500px; padding: 2rem; text-align: center;
    position: relative;
  }
  .tutorial-step h3 { color: #00ffc8; margin-top: 0; }
  .tutorial-nav { margin-top: 1.5rem; display: flex; justify-content: space-between; }
  .tutorial-nav button {
    background: #333; color: #fff; border: 1px solid #555; padding: 0.5rem 1rem;
    border-radius: 4px; cursor: pointer;
  }
  #tz-close {
    background: transparent; border: none; color: #888; position: absolute;
    top: 15px; right: 20px; font-size: 1.5rem; cursor: pointer;
  }
</style>

<div id="tutorial-overlay">
  <div class="tutorial-content">
    <button id="tz-close" title="Close (Esc)">&times;</button>
    <div class="tutorial-step">
      <h3>Welcome to TimeShareZ!</h3>
      <p>This is a quick tour to get you started.</p>
    </div>
    <div class="tutorial-step" hidden>
      <h3>The Feeds</h3>
      <p>You can browse different feeds.</p>
    </div>
    <div class="tutorial-nav">
      <button id="tz-back">Back</button>
      <button id="tz-next">Next</button>
    </div>
  </div>
</div>

<!-- NEW: The JavaScript logic is now INSIDE the HTML file. -->
<!-- This script runs automatically when the HTML is added to the page. -->
<script>
  (() => {
    const overlay = document.querySelector("#tutorial-overlay");
    if (!overlay) { return; }

    const steps = overlay.querySelectorAll(".tutorial-step");
    const nextButton = overlay.querySelector("#tz-next");
    const backButton = overlay.querySelector("#tz-back");
    const closeButton = overlay.querySelector("#tz-close");
    let currentStepIndex = 0;

    if (steps.length === 0) return;

    const showStep = (index) => {
      steps.forEach((step, idx) => { step.hidden = (idx !== index); });
    };
    const closeTutorial = () => { overlay.style.display = "none"; };

    if (nextButton) nextButton.addEventListener("click", () => {
      if (currentStepIndex < steps.length - 1) showStep(++currentStepIndex);
    });
    if (backButton) backButton.addEventListener("click", () => {
      if (currentStepIndex > 0) showStep(--currentStepIndex);
    });
    if (closeButton) closeButton.addEventListener("click", closeTutorial);
    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeTutorial();
    });

    showStep(0);
  })();
</script>
