<script type="module">
  import { wireTopBar, initTutorialOverlay } from './script.js';
  import SessionManager from './sessionManager.js';

  const components = [
    "top-bar",
    "funded-feed",
    "hot-feed",
    "main-rotator",
    "tutorial-overlay",
    "footer"
  ];

  async function loadComponents() {
    const root = document.getElementById("app-root");

    for (const name of components) {
      const res = await fetch(`components/${name}.html`);
      const html = await res.text();
      root.insertAdjacentHTML("beforeend", html);

      if (name === "top-bar") {
        wireTopBar();
        // ðŸ”¹ Call Supabase session function here
        await SessionManager.getOrCreateSession();
      }
    }

    initTutorialOverlay();
  }

  loadComponents();
</script>
